/*!
 * angular-localization-fi :: v1.6.1 :: 2018-10-04
 * web: http://doshprompt.github.io/angular-localization
 *
 * Copyright (c) 2018 | Rahul Doshi
 * License: MIT
 */
!function(e,n,t,o){"use strict";e.module("ngLocalize.Version",[]).constant("localeVer","1.6.1"),e.module("ngLocalize",["ngSanitize","ngLocalize.Config","ngLocalize.Events","ngLocalize.InstalledLanguages"]),e.module("ngLocalize.InstalledLanguages",[]).value("localeSupported",["en-US"]).value("localeFallbacks",{en:"en-US"}),e.module("ngLocalize").service("locale",["$injector","$http","$q","$log","$rootScope","$window","localeConf","localeEvents","localeSupported","localeFallbacks",function(n,o,a,i,r,l,c,s,u,g){function f(e){var n,t;if(c.allowNestedJson){var o=e?e.split("."):[];n=o.length>1?o.slice(1):"",t=o.length>0?o[0].split(I):[],t.push(o.length>1?o[1]:"")}else t=e?e.split("/").join(".").split("."):[],n=t.length>1?t[t.length-1]:"";return{key:n,path:t}}function d(e){return e&&e.length&&P.test(e)}function h(e){var n=f(e).path,t="";return n.length>1&&(t=n.slice(0,-1).join(I)),t}function v(e){return f(e).key}function p(e){var n,t=null,o=f(e).path;if(o.length>1)for(t=x,n=0;n<o.length-1;n++){if(!t[o[n]]){t=null;break}t=t[o[n]]}return t}function m(e){return(Object.isFrozen||function(e){return e&&e.$$frozen})(e)}function $(e){return(Object.freeze||function(e){e&&(e.$$frozen=!0)})(e)}function w(e,n,t){return e.replace(new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),t)}function L(n){var t,a,l,u=f(n).path,g=x,d=C,v=c.basePath+"/"+d;if(u.length>1){for(l=0;l<u.length-1;l++)a=u[l],g[a]||(g[a]={}),t=g,g=g[a],v+="/"+a;m(g)&&(g=e.extend({},g)),g._loading||(g._loading=!0,v+=c.fileExtension,o.get(v).then(function(e){var o,i=h(n),l=e.data;for(o in l)l.hasOwnProperty(o)&&(g[o]=l[o]);delete g._loading,t[a]=$(g),g=null,r.$broadcast(s.resourceUpdates,{locale:d,path:i,bundle:t[a]}),U[i]&&U[i].resolve(i)},function(e){var t=h(n);i.error("[localizationService] Failed to load: "+v),delete g._loading,U[t]&&U[t].reject(e.data)}))}}function S(e){var n,t;return e=e||c.langFile,t=e+"._LOOKUP_",n=p(t),U[e]||(U[e]=a.defer()),n&&!n._loading?U[e].resolve(e):n||L(t),U[e].promise}function b(n){var t,o,i;if(e.isString(n))t=n.split(",");else{if(!e.isArray(n))throw new Error("locale.ready requires either an Array or comma-separated list.");t=n}return t.length>1?(i=[],t.forEach(function(e){i.push(S(e))}),o=a.all(i)):o=S(n),o}function E(n,t){var o=n,a=0;return t&&(e.isArray(t)?e.forEach(t,function(e,n){o=w(o,"%"+(n+1),e),o=w(o,"{"+(n+1)+"}",e)}):e.forEach(t,function(e,n){++a,o=w(o,"{"+n+"}",e),o=w(o,"%"+n,e),o=w(o,"%"+a,e),o=w(o,"{"+a+"}",e)})),o=o.replace(/\n/g,"<br>")}function z(n,t){var o,a,r,l="",s=!1;if(e.isString(n)&&!t&&n.indexOf(c.delimiter)!==-1&&(r=n.split(c.delimiter),n=r[0],t=e.fromJson(r[1])),s=d(n))if(e.isObject(t)||(t=[t]),o=p(n),o&&!o._loading){if(a=v(n),c.allowNestedJson){for(var u=0;u<a.length-1;u++){if(!o[a[u]]){o=null;break}o=o[a[u]]}a=a[a.length-1]}o[a]?e.isString(o[a])?l=E(o[a],t):(i.info("[localizationService] Key is not a string: "+n+". Is it a nested object?"),l="%%KEY_NOT_STRING%%"):(i.info("[localizationService] Key not found: "+n),l="%%KEY_NOT_FOUND%%")}else o||L(n);else l=n;return l}function k(e){e=e.split("-")[0],T.attr("lang",e)}function y(n){var t=null;if(n&&n.length&&(u.forEach(function(e){if(0===e.indexOf(n))return void(t=e)}),!t)){var o=g[n.split("-")[0]];e.isUndefined(o)||(t=o)}return t||c.defaultLocale}function O(n){var t;e.isString(n)&&n.length?(n=n.trim(),t=y(n)):t=c.defaultLocale,t!==C&&(x={},U={},C=t,k(t),r.$broadcast(s.localeChanges,C),j?j.put(c.cookieName,t):c.persistSelection&&localStorage.setItem(c.cookieName,t))}function N(){return C}function _(){var n,t,o=l.navigator,a=["language","browserLanguage","systemLanguage","userLanguage"];if(e.isArray(o.languages))for(n=0;n<o.languages.length;n++)if(t=o.languages[n])return t;for(n=0;n<a.length;n++)if(t=o[a[n]])return t;return null}function A(){var e=_(),n=j&&j.get(c.cookieName),t=c.persistSelection&&localStorage.getItem(c.cookieName);O(n||t||e)}var C,U,x,j,P=c.validTokens||new RegExp("^([\\w-]+\\/)*([\\w-]+\\.)+([\\w\\s-])+\\w(:.*)?$"),T=e.element(t.body).parent(),I=c.allowNestedJson?"/":".";return c.persistSelection&&n.has("$cookies")&&(j=n.get("$cookies")),A(),{ready:b,isToken:d,getPath:h,getKey:v,setLocale:O,getLocale:N,getString:z,getPreferredBrowserLanguage:_}}]),e.module("ngLocalize").filter("i18n",["locale",function(e){var n=function(n,t){return e.getString(n,t)};return n.$stateful=!0,n}]),e.module("ngLocalize.Events",[]).constant("localeEvents",{resourceUpdates:"ngLocalizeResourcesUpdated",localeChanges:"ngLocalizeLocaleChanged"}),e.module("ngLocalize").directive("i18n",["$sce","locale","localeEvents","localeConf",function(n,t,o,a){function i(e,t){t!==e.html()&&e.html(n.getTrustedHtml(t))}function r(e,n,o){t.isToken(n)?t.ready(t.getPath(n)).then(function(){i(e,t.getString(n,o))}):i(e,n)}return function(n,t,i){var l;i.$observe("i18n",function(e,n){e&&e!==n&&r(t,e,l)}),e.forEach(i.$attr,function(e,n){a.observableAttrs.test(e)&&i.$observe(n,function(e){!e&&l&&l[n]||(l=l||{},l[n]=i[n],r(t,i.i18n,l))})}),n.$on(o.resourceUpdates,function(){r(t,i.i18n,l)}),n.$on(o.localeChanges,function(){r(t,i.i18n,l)})}}]).directive("i18nAttr",["$rootScope","locale","localeEvents",function(n,t,o){function a(e,n,t){e.$set(e.$normalize(n),t)}function i(e,n,o){var i={};return function(n){var r,l=e.$eval(n),c=[];for(var s in l)r=l[s],t.isToken(r)&&c.indexOf(t.getPath(r))===-1&&c.push(t.getPath(r));t.ready(c).then(function(){var e="";for(var n in l)r=l[n],e=t.getString(r),i[n]!==e&&(i[n]=e,a(o,n,e))})}}return{priority:1e3,compile:function(t,r){return e.forEach(n.$eval(r.i18nAttr),function(e,n){a(r,n,e||"...")}),function(e,n,t){var a=i(e,n,t);t.$observe("i18nAttr",function(e){e&&a(e)}),e.$on(o.resourceUpdates,function(){a(t.i18nAttr)}),e.$on(o.localeChanges,function(){a(t.i18nAttr)})}}}}]),e.module("ngLocalize.Config",[]).value("localeConf",{basePath:"languages",defaultLocale:"en-US",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::",validTokens:new RegExp("^([\\w-]+\\/)*([\\w-]+\\.)+([\\w\\s-])+\\w(:.*)?$"),allowNestedJson:!1})}(window.angular,window,window.document);
//# sourceMappingURL=angular-localization-fi.min.js.map
